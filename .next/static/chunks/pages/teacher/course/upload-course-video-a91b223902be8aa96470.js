(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4927],{7251:function(e,r,s){"use strict";var t=s(5893),a=(s(7294),s(1664));r.Z=function(e){var r=e.pageTitle,s=e.homePageUrl,n=e.homePageText,c=e.activePageText;return(0,t.jsxs)("div",{className:"page-title-area",children:[(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"page-title-content",children:[(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(a.default,{href:s,children:(0,t.jsx)("a",{children:n})})}),(0,t.jsx)("li",{className:"active",children:c})]}),(0,t.jsx)("h2",{children:r})]})}),(0,t.jsx)("div",{className:"shape9",children:(0,t.jsx)("img",{src:"/images/shape8.svg",alt:"image"})})]})}},3501:function(e,r,s){"use strict";s.r(r);var t=s(5893),a=s(4942),n=s(7757),c=s.n(n),o=s(5861),i=s(5982),l=s(7294),u=s(2286),d=s(9669),h=s.n(d),p=s(3686),v=s(4264),m=s(6955),x=s(8279),f=s(3800),j=s(7251),g=s(1339);function b(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,t)}return s}function N(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?b(Object(s),!0).forEach((function(r){(0,a.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}var y={video_url:"",order:0,name:"",description:"",courseId:""},C=function(e){var r=e.courses,s=(0,u.parseCookies)().token,n=l.useState(y),d=(0,i.Z)(n,2),b=d[0],C=d[1],Z=l.useState(!1),_=(0,i.Z)(Z,2),O=_[0],w=_[1],P=l.useState(!0),k=(0,i.Z)(P,2),E=k[0],T=k[1];l.useEffect((function(){var e=b.order,r=b.video_url,s=b.name,t=Object.values({video_url:r,name:s,order:e}).every((function(e){return Boolean(e)}));T(!t)}),[b]);var S=function(){var e=(0,o.Z)(c().mark((function e(){var r,s,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",b.video_url),r.append("upload_preset","vikingsvideo"),r.append("cloud_name","dev-empty"),e.next=6,h().post("https://api.cloudinary.com/v1_1/dwho2bgom",r);case 6:return s=e.sent,t=s.data.url,e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var r=e.target,s=r.name,t=r.value,n=r.files;if("video_url"===s){if(n[0].size/1024/1024>20)return addToast("The video size greater than 20 MB. Make sure less than 20 MB.",{appearance:"error"}),void(e.target.value=null);C((function(e){return N(N({},e),{},{video_url:n[0]})}))}else C((function(e){return N(N({},e),{},(0,a.Z)({},s,t))}))},U=function(){var e=(0,o.Z)(c().mark((function e(r){var t,a,n,o,i,l,u,d,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),w(!0),e.prev=2,t="",!b.video_url){e.next=9;break}return e.next=7,S();case 7:a=e.sent,t=a.replace(/^http:\/\//i,"https://");case 9:return n="".concat(v.Z,"/api/v1/courses/course/video-upload"),o=b.order,i=b.name,l=b.description,u=b.courseId,d={order:o,name:i,description:l,courseId:u,videoUrl:t},e.next=14,h().post(n,d,{headers:{Authorization:s}});case 14:p=e.sent,console.log(p.data),w(!1),x.ZP.success(p.data),C(y),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(2),(0,f.Z)(e.t0,setError),x.ZP.error(error),console.log(e.t0);case 26:return e.prev=26,w(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[2,21,26,29]])})));return function(r){return e.apply(this,arguments)}}();return(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)(j.Z,{pageTitle:"Upload Course Video",homePageUrl:"/",homePageText:"Home",activePageText:"Upload Course Video"}),(0,t.jsx)("div",{className:"ptb-100",children:(0,t.jsxs)("div",{className:"container",children:[0==r.length&&(0,t.jsxs)(p.Z,{color:"danger",className:"text-center",children:["You have to create course first here ",(0,t.jsx)(g.Z,{href:"/teacher/course/create",children:(0,t.jsx)("a",{children:"Create Course"})})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-4 col-lg-4",children:(0,t.jsx)("div",{className:"td-sidebar",children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:(0,t.jsx)(g.Z,{href:"/teacher/courses",activeClassName:"active",children:(0,t.jsx)("a",{children:"My Courses"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(g.Z,{href:"/teacher/course/create",activeClassName:"active",children:(0,t.jsx)("a",{children:"Create A Course"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(g.Z,{href:"/teacher/courses/course-edit",activeClassName:"active",children:(0,t.jsx)("a",{children:"Edit My Course"})})}),(0,t.jsx)("li",{children:(0,t.jsx)(g.Z,{href:"/teacher/course/upload-course-video",activeClassName:"active",children:(0,t.jsx)("a",{children:"Upload Course Video"})})})]})})}),(0,t.jsx)("div",{className:"col-md-8 col-lg-8",children:(0,t.jsx)("div",{className:"border-box",children:(0,t.jsxs)("form",{onSubmit:U,children:[O&&(0,t.jsx)("h3",{className:"loading-spinner",children:(0,t.jsx)("div",{className:"d-table",children:(0,t.jsxs)("div",{className:"d-table-cell",children:[(0,t.jsx)(m.Z,{color:"danger"})," Vide uploading..."]})})}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Select Course"}),(0,t.jsxs)("select",{onChange:D,name:"courseId",className:"form-control",children:[(0,t.jsx)("option",{children:"Select Course"}),r.map((function(e){return(0,t.jsx)("option",{value:e.id,children:e.title},e.id)}))]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Video Order (1 or 2...)"}),(0,t.jsx)("input",{type:"number",placeholder:"Order Number",className:"form-control",name:"order",value:b.order,onChange:D})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Name"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter course title",className:"form-control",name:"name",value:b.name,onChange:D})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Deescription"}),(0,t.jsx)("input",{type:"text",placeholder:"Enter course title",className:"form-control",name:"description",value:b.description,onChange:D})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Video"}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{type:"file",name:"video_url",accept:"video/*",onChange:D})]}),(0,t.jsx)("br",{}),(0,t.jsxs)("button",{className:"default-btn",disabled:E||O,children:[(0,t.jsx)("i",{className:"flaticon-right-chevron"}),"Upload"]})]})})})]})]})})]})};C.getInitialProps=function(){var e=(0,o.Z)(c().mark((function e(r){var s,t,a,n,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,u.parseCookies)(r),t=s.token){e.next=3;break}return e.abrupt("return",{courses:[]});case 3:return a={headers:{Authorization:t}},n="".concat(v.Z,"/api/v1/courses/my-courses"),e.next=7,h().get(n,a);case 7:return o=e.sent,e.abrupt("return",o.data);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),r.default=C},3800:function(e,r){"use strict";r.Z=function(e,r){var s;e.response?(s=e.response.data,e.response.data.error&&(s=e.response.data.error.message)):e.request&&(s=e.request),r(s)}},6325:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/course/upload-course-video",function(){return s(3501)}])}},function(e){e.O(0,[129,78,9774,2888,179],(function(){return r=6325,e(e.s=r);var r}));var r=e.O();_N_E=r}]);